---
path: "/posts/2022/3/05"
date: "2022-03-05"
title: "漸進的型付けとは"
categories: ["エンジニアリング"]
tags: ["アーキテクチャ・設計", "TypeScript", "JavaScript", "Python", "Ruby" ]
excerpt: "静的型付け、動的型付けと何が違うの"
type: "post"
---

漸進的型付けとは、プログラマーが静的型付けと動的型付けを選べる手法のこと、らしい。先日、仕事で「漸進的型付けって知ってる？」と聞かれて、正直初耳だったのでイメージがつかなかった。

TypeScript のように、JavaScript を拡張し、型システムを付与した言語はこの漸進的型付けに位置づけられるらしい。

JavaScript が動的型付けなのに対し、TypeScript で型が付けられる（型チェッカーによる制約をつけることができる）のは、一体どういうことなんだろうと言われてみて気になった。

## 動的型付け

プログラムを書く際に、プログラマーは、変数に対して値（文字列、数値）を代入するが、実際にどの型であるかのアノテーションは行わない。
プログラマーではなく、インタプリタが代入された値を見て型を付けるのが動的型付け。

いわゆるスクリプト型言語（JavaScript*, PHP*, Python*, Ruby) は動的型付けである。

インタプリタ（コンパイラ）が型を付けるということは、プログラムがコンパイルされるまで変数の型がわからないということである。

※ これらの言語は、言語拡張によって漸進的型付けを備えるようになった

## 静的型付け

動的型付けとは逆に、変数を宣言する際に型を明示的に定義する。
定義した型以外の値が扱えないようにするもの。

コンパイラ型の言語（C, C#, Java, golang) は静的型付けである。

コンパイルする前に型を付けることで、IDEやエディタが事前にバグとなりうる箇所、またはエラーを検知し、プログラマに知らせてくれる。これは静的型付けのメリットである。

また、型があらかじめわかっていると、コンパイラが最適化したマシン語に変換してくれる。つまり、実行時にとても速く動作する。


## あらためて漸進的型付けとは

> 漸進的型チェッカー は、コンパイル時に型エラーを検出するためにプログラムを部分的にチェックしますが、他の部分はチェックしないといった型チェッカーです。それは型とともにアノテートされたプログラム部分により指示された通りにチェクします。

[What is Gradual Typing:漸進的型付けとは何か -Qiita](https://qiita.com/t2y/items/0a604384e18db0944398#%E6%BC%B8%E9%80%B2%E7%9A%84%E5%9E%8B%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF) より引用


動的型付言語に後付で型宣言を追加したイメージ。アノテーション（型宣言）のない変数は any 型と仮定する。

---

## 参考

- [What is Gradual Typing: 漸進的型付けとは何か - Qiita](https://qiita.com/t2y/items/0a604384e18db0944398)
- [動的型付けと静的型付け - Qiita](https://qiita.com/toryuneko/items/c023031b61886cae2a99)
- [漸進的型付け言語の時代に必要なもの - mizchi's blog](https://mizchi.hatenablog.com/entry/2018/07/05/180219)

---

/以上



